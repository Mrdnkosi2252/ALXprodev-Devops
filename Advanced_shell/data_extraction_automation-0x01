#!/bin/bash

# Check if data.json exists and is not empty
if [ ! -s "data.json" ]; then
    echo "Error: data.json not found or empty"
    exit 1
fi

# Use jq to extract name, height, weight, and type, then format with awk
jq -r '[.name, .height, .weight, .types[0].type.name] | @tsv' data.json | \
awk -F'\t' '{
    # Capitalize name and type
    name = toupper(substr($1, 1, 1)) substr($1, 2)
    type = toupper(substr($4, 1, 1)) substr($4, 2)
    # Format height (divide by 10, one decimal) and weight (divide by 10, no decimals)
    height = sprintf("%.1f", $2/10)
    weight = sprintf("%.0f", $3/10)
    printf "%s is of type %s, weighs %skg, and is %sm tall.\n", name, type, weight, height
}'
